<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用户 - Microsoft 365 管理系统</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/materialdesignicons.min.css" rel="stylesheet">
    <link href="css/style.min.css" rel="stylesheet">
    <!--对话框-->
    <link href="js/jconfirm/jquery-confirm.min.css" rel="stylesheet">
    <link href="css/style.min.css" rel="stylesheet">
</head>
<body>
<div class="lyear-layout-web">
    <div class="lyear-layout-container">
        <!--左侧导航-->
        <aside class="lyear-layout-sidebar">

            <!-- logo -->
            <div id="logo" class="sidebar-header">
                <a href="index.html"><img src="images/logo-sidebar.png" title="LightYear"
                                          alt="LightYear"/></a>
            </div>
            <div class="lyear-layout-sidebar-scroll">
                <nav class="sidebar-main">
                    <ul class="nav nav-drawer">
                        <li class="nav-item nav-item-has-subnav">
                            <a href="index.html"><i class="mdi mdi-home"></i> 后台首页</a>
                        </li>
                        <li class="nav-item nav-item-has-subnav ">
                            <a href="licenses.html"><i class="mdi mdi-shape-rectangle-plus"></i>订阅管理</a>
                        </li>
                        <li class="nav-item nav-item-has-subnav active">
                            <a href="users.html"><i class="mdi mdi-account-multiple"></i>用户管理</a>
                        </li>
                        <li class="nav-item nav-item-has-subnav">
                            <a href="about.html"><i class="mdi mdi-information-variant"></i>关于平台</a>
                        </li>
                    </ul>
                </nav>
            </div>

        </aside>
        <!--End 左侧导航-->

        <!--头部信息-->
<!--        <div class="headerPage"></div>-->
        <header class="lyear-layout-header">

            <nav class="navbar navbar-default">
                <div class="topbar">

                    <div class="topbar-left">
                        <div class="lyear-aside-toggler">
                            <span class="lyear-toggler-bar"></span>
                            <span class="lyear-toggler-bar"></span>
                            <span class="lyear-toggler-bar"></span>
                        </div>
                        <span class="navbar-page-title" id="titleName"> 后台首页 </span>
                    </div>

                    <ul class="topbar-right">
                        <!--切换主题配色-->
                        <li class="dropdown dropdown-skin">
                            <span data-toggle="dropdown" class="icon-palette"><i class="mdi mdi-palette"></i></span>
                            <ul class="dropdown-menu dropdown-menu-right" data-stopPropagation="true">
                                <li class="drop-title"><p>主题</p></li>
                                <li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="site_theme" value="default" id="site_theme_1" checked>
                    <label for="site_theme_1"></label>
                  </span>
                                    <span>
                    <input type="radio" name="site_theme" value="dark" id="site_theme_2">
                    <label for="site_theme_2"></label>
                  </span>
                                    <span>
                    <input type="radio" name="site_theme" value="translucent" id="site_theme_3">
                    <label for="site_theme_3"></label>
                  </span>
                                </li>
                                <li class="drop-title"><p>LOGO</p></li>
                                <li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="logo_bg" value="default" id="logo_bg_1" checked>
                    <label for="logo_bg_1"></label>
                  </span>
                                    <span>
                    <input type="radio" name="logo_bg" value="color_2" id="logo_bg_2">
                    <label for="logo_bg_2"></label>
                  </span>
                                    <span>
                    <input type="radio" name="logo_bg" value="color_3" id="logo_bg_3">
                    <label for="logo_bg_3"></label>
                  </span>
                                    <span>
                    <input type="radio" name="logo_bg" value="color_4" id="logo_bg_4">
                    <label for="logo_bg_4"></label>
                  </span>
                                    <span>
                    <input type="radio" name="logo_bg" value="color_5" id="logo_bg_5">
                    <label for="logo_bg_5"></label>
                  </span>
                                    <span>
                    <input type="radio" name="logo_bg" value="color_6" id="logo_bg_6">
                    <label for="logo_bg_6"></label>
                  </span>
                                    <span>
                    <input type="radio" name="logo_bg" value="color_7" id="logo_bg_7">
                    <label for="logo_bg_7"></label>
                  </span>
                                    <span>
                    <input type="radio" name="logo_bg" value="color_8" id="logo_bg_8">
                    <label for="logo_bg_8"></label>
                  </span>
                                </li>
                                <li class="drop-title"><p>头部</p></li>
                                <li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="header_bg" value="default" id="header_bg_1" checked>
                    <label for="header_bg_1"></label>
                  </span>
                                    <span>
                    <input type="radio" name="header_bg" value="color_2" id="header_bg_2">
                    <label for="header_bg_2"></label>
                  </span>
                                    <span>
                    <input type="radio" name="header_bg" value="color_3" id="header_bg_3">
                    <label for="header_bg_3"></label>
                  </span>
                                    <span>
                    <input type="radio" name="header_bg" value="color_4" id="header_bg_4">
                    <label for="header_bg_4"></label>
                  </span>
                                    <span>
                    <input type="radio" name="header_bg" value="color_5" id="header_bg_5">
                    <label for="header_bg_5"></label>
                  </span>
                                    <span>
                    <input type="radio" name="header_bg" value="color_6" id="header_bg_6">
                    <label for="header_bg_6"></label>
                  </span>
                                    <span>
                    <input type="radio" name="header_bg" value="color_7" id="header_bg_7">
                    <label for="header_bg_7"></label>
                  </span>
                                    <span>
                    <input type="radio" name="header_bg" value="color_8" id="header_bg_8">
                    <label for="header_bg_8"></label>
                  </span>
                                </li>
                                <li class="drop-title"><p>侧边栏</p></li>
                                <li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="sidebar_bg" value="default" id="sidebar_bg_1" checked>
                    <label for="sidebar_bg_1"></label>
                  </span>
                                    <span>
                    <input type="radio" name="sidebar_bg" value="color_2" id="sidebar_bg_2">
                    <label for="sidebar_bg_2"></label>
                  </span>
                                    <span>
                    <input type="radio" name="sidebar_bg" value="color_3" id="sidebar_bg_3">
                    <label for="sidebar_bg_3"></label>
                  </span>
                                    <span>
                    <input type="radio" name="sidebar_bg" value="color_4" id="sidebar_bg_4">
                    <label for="sidebar_bg_4"></label>
                  </span>
                                    <span>
                    <input type="radio" name="sidebar_bg" value="color_5" id="sidebar_bg_5">
                    <label for="sidebar_bg_5"></label>
                  </span>
                                    <span>
                    <input type="radio" name="sidebar_bg" value="color_6" id="sidebar_bg_6">
                    <label for="sidebar_bg_6"></label>
                  </span>
                                    <span>
                    <input type="radio" name="sidebar_bg" value="color_7" id="sidebar_bg_7">
                    <label for="sidebar_bg_7"></label>
                  </span>
                                    <span>
                    <input type="radio" name="sidebar_bg" value="color_8" id="sidebar_bg_8">
                    <label for="sidebar_bg_8"></label>
                  </span>
                                </li>
                            </ul>
                        </li>
                        <!--切换主题配色-->

                        <!-- 切换组织类型-->
                        <div class="form-group">
                            <div class="col-xs-12">
                                <label for="appNameSelect"></label>
                                <select id="appNameSelect" class="form-control" name="app-select" size=""
                                        onchange="reloadPage()">
                                </select>
                            </div>
                        </div>
                        <div class="col-xs-5">
                            <button class="btn btn-label" id="clearCache" onclick="refreshCache()"><label><i class="mdi mdi-cached"></i></label>刷新缓存</button>
                        </div>
                    </ul>

                </div>
            </nav>

        </header>
        <!--End 头部信息-->

        <!--页面主要内容-->
        <main class="lyear-layout-content">
            <div class="container-fluid">
                <!-- 用户-->
                <div class="row">
                    <div class="col-sm-6 col-lg-3">
                        <div class="card ">
                            <div class="card-body clearfix">
                                <div class="pull-right">
                                    <p class="h6 m-t-0">总用户数</p>
                                    <p class="h3 m-b-0" id="users">0</p>
                                </div>
                                <div class="pull-left"><span class="img-avatar img-avatar-48 bg-translucent"><i
                                        class="mdi mdi-account fa-1-5x"></i></span></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-lg-3">
                        <div class="card ">
                            <div class="card-body clearfix">
                                <div class="pull-right">
                                    <p class="h6  m-t-0">允许登陆</p>
                                    <p class="h3  m-b-0" id="allowedUsers">0</p>
                                </div>
                                <div class="pull-left"><span class="img-avatar img-avatar-48 bg-translucent"><i
                                        class="mdi mdi-account-check fa-1-5x"></i></span></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-lg-3">
                        <div class="card ">
                            <div class="card-body clearfix">
                                <div class="pull-right">
                                    <p class="h6 m-t-0">禁止登陆</p>
                                    <p class="h3 m-b-0" id="biddenUsers">0</p>
                                </div>
                                <div class="pull-left"><span class="img-avatar img-avatar-48 bg-translucent"><i
                                        class="mdi mdi-account-off fa-1-5x"></i></span></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-lg-3">
                        <div class="card">
                            <div class="card-body clearfix">
                                <div class="pull-right">
                                    <p class="h6 m-t-0">未授权</p>
                                    <p class="h3 m-b-0" id="unauthorizedUsers">0</p>
                                </div>
                                <div class="pull-left"><span class="img-avatar img-avatar-48 bg-translucent"><i
                                        class="mdi mdi-account-alert fa-1-5x"></i></span></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 搜索框-->
                <div class="row">

                    <div class="col-xs-2">
                        <label for="license"></label>
                        <select class="form-control" id="license" name="license-select" size="1">
                            <option value="" disabled selected hidden>请选择许可证</option>
                            <option value="">不限制</option>
                        </select>
                    </div>
                    <div class="col-xs-2">
                        <label for="accountEnabled"></label>
                        <select class="form-control" id="accountEnabled" name="login-select" size="1">
                            <option value="" disabled selected hidden>是否允许登录</option>
                            <option value="">不限制</option>
                            <option value="1">允许</option>
                            <option value="0">禁止</option>
                        </select>
                    </div>
                    <div class="col-xs-2">
                        <label for="assignLicense"></label>
                        <select class="form-control" id="assignLicense" name="auth-select" size="1">
                            <option value="" disabled selected hidden>是否授权</option>
                            <option value="">不限制</option>
                            <option value="1">已授权</option>
                            <option value="0">未授权</option>
                        </select>
                    </div>

                    <div class="col-xs-2">
                        <label for="userPrincipalName"></label>
                        <input class="form-control" type="text" id="userPrincipalName"
                               name="account-text-input"
                               style="height: 33px"
                               placeholder="请输入账号">
                    </div>
                    <div class="col-xs-2">
                        <label for="displayName"></label>
                        <input class="form-control" type="text" id="displayName"
                               name="display-name-text-input"
                               style="height: 33px"
                               placeholder="请输入姓名">
                    </div>
                    <div class="col-xs-2">
                        <button class="btn btn-info"
                                style="margin:21px auto auto auto; height: 33px"
                                type="submit" onclick="searchUsers()">搜索
                        </button>
                    </div>

                </div>
                <br>
                <!-- 表单-->
                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-toolbar clearfix">
                                <!-- 操作按钮-->
                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="toolbar-btn-action" style=" height: 33px">
                                            <a class="btn m-r-10" data-toggle="modal"
                                               data-target=".bs-add-modal-lg">
                                                <i class="mdi mdi-plus" id="add"></i> 新增
                                            </a>
                                            <a class="btn m-r-10 enable-account-p disabled" id="enableAccount"
                                               href="#!"><i
                                                    class="mdi mdi-check"></i> 启用</a>
                                            <a class="btn m-r-10 disable-account-p disabled" id="disableAccount"
                                               href="#!"><i
                                                    class="mdi mdi-block-helper"></i> 禁用</a>
                                            <a class="btn m-r-10 deleted-account-p disabled" id="deletedAccount"
                                               href="#!"><i
                                                    class="mdi mdi-window-close"></i> 删除</a>
                                            <a class="btn m-r-10 add-license-account-p disabled" id="addLicenseAccount"
                                               data-toggle="modal"
                                               data-target=".bs-auth-modal-lg">
                                                <i class="mdi mdi-office"></i> 授权
                                            </a>
                                            <a class="btn m-r-10 dis-license-account-p disabled" id="disLicenseAccount"
                                               data-toggle="modal"
                                               data-target=".bs-dis-auth-modal-lg">
                                                <i class="mdi mdi-office"></i> 取消
                                            </a>
                                            <a class="btn m-r-10 deleted-account-p-batch pull-right"
                                               id="deletedAccountBatch" href="#!"><i class="mdi mdi-delete"></i>
                                                全部删除</a>
                                            <a class="btn m-r-10  bs-user-batch-modal-lg pull-right" id="addUserBatchLabel"
                                               data-toggle="modal"
                                               data-target=".bs-user-batch-modal-lg">
                                                <i class="mdi mdi-playlist-plus"></i> 批量创建
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <!--模糊框-->
                                <div class="modal fade bs-add-modal-lg" tabindex="-1" role="dialog"
                                     aria-labelledby="addLabel">
                                    <div class="modal-dialog modal-lg" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close"><span
                                                        aria-hidden="true">×</span></button>
                                                <h4 class="modal-title" id="addLabel">新增账户</h4>
                                            </div>
                                            <div class="modal-body col-xs-12">
                                                <div class="col-xs-6">
                                                    <div class="input-group m-b-10">
                                                        <span class="input-group-addon"
                                                              id="add-display-name">显示姓名</span>
                                                        <input type="text" class="form-control" placeholder=""
                                                               id="addDisplayName"
                                                               aria-describedby="add-display-name-input">
                                                    </div>
                                                </div>
                                                <div class="col-xs-6">
                                                    <label for="addLicenseSelect"></label>
                                                    <select class="form-control" id="addLicenseSelect"
                                                            style="height: 38px"
                                                            name="license-select" size="1">
                                                        <option value="" disabled selected hidden>请选择许可证</option>
                                                    </select>
                                                </div>
                                                <div class="col-xs-6">
                                                    <div class="input-group m-b-10">
                                                        <span class="input-group-addon">邮箱前缀</span>
                                                        <input type="text" class="form-control" placeholder=""
                                                               id="addMailNickname"
                                                               aria-describedby="addMailNickname">
                                                    </div>
                                                </div>
                                                <div class="col-xs-6">
                                                    <label for="addDomainSelect"></label>
                                                    <select class="form-control" id="addDomainSelect"
                                                            style="height: 38px"
                                                            name="license-select" size="1">
                                                        <option value="" disabled selected hidden>请选择域名后缀</option>
                                                    </select>
                                                </div>
                                                <div class="col-xs-6">
                                                    <div class="input-group m-b-10">
                                                        <span class="input-group-addon" id="add-password">密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码</span>
                                                        <input type="text" class="form-control" placeholder=""
                                                               id="addPassword"
                                                               aria-describedby="add-password-input">
                                                    </div>
                                                </div>
                                                <hr>

                                                <div class="col-xs-12">
                                                    <div class="input-group m-b-10">
                                                        <span class="input-group-addon" id="add-mail">邮件地址</span>
                                                        <input type="text" class="form-control" placeholder="填写该字段将发送账号密码到该邮箱！"
                                                               id="addMail"
                                                               aria-describedby="add-password-mail">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                                                </button>
                                                <button type="button" class="btn btn-primary" id="addUserClick"
                                                        data-dismiss="modal"
                                                        onclick="addUserClick()">保存
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal fade bs-auth-modal-lg" tabindex="-1" role="dialog"
                                     id="addLicenseModal"
                                     aria-labelledby="authLabel">
                                    <div class="modal-dialog modal-lg" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close"><span
                                                        aria-hidden="true">×</span></button>
                                                <h4 class="modal-title" id="authLabel">分配许可证</h4>
                                            </div>
                                            <div class="modal-body col-xs-12">
                                                <div class="col-xs-6">
                                                    <label for="licenseSelectModal"></label>
                                                    <div class="alert alert-success" role="alert" id="addLicenseUser">
                                                    </div>
                                                    <span id="licenseSelectModalUserId" hidden></span>
                                                    <select class="form-control" id="licenseSelectModal"
                                                            style="height: 38px"
                                                            name="license-select" size="1">
                                                        <option value="" disabled selected hidden>请选择许可证</option>
                                                    </select>
                                                </div>

                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                                                </button>
                                                <button type="button" class="btn btn-primary" data-dismiss="modal"
                                                        onclick="addLicenseClick()">保存
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal fade bs-dis-auth-modal-lg" tabindex="-1" role="dialog"
                                     id="disLicenseModal"
                                     aria-labelledby="authLabel">
                                    <div class="modal-dialog modal-lg" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close"><span
                                                        aria-hidden="true">×</span></button>
                                                <h4 class="modal-title" id="disAuthLabel">取消许可证</h4>
                                            </div>
                                            <div class="modal-body col-xs-12">
                                                <div class="col-xs-6">
                                                    <label for="licenseSelectModal"></label>
                                                    <div class="alert alert-success" role="alert" id="disLicenseUser">
                                                    </div>
                                                    <span id="disLicenseSelectModalUserId" hidden></span>
                                                </div>

                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                                                </button>
                                                <button type="button" class="btn btn-primary" data-dismiss="modal"
                                                        onclick="cancelLicenseClick()">保存
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal fade bs-user-batch-modal-lg" tabindex="-1" role="dialog"
                                     id="addUserBatchModal"
                                     aria-labelledby="addUserBatchLabel">
                                    <div class="modal-dialog modal-lg" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close"><span
                                                        aria-hidden="true">×</span></button>
                                                <h4 class="modal-title" id="userLabelBatch">批量创建账户</h4>
                                            </div>
                                            <div class="modal-body col-xs-12">
                                                <h3 style="color: red">警告！ 该操作会自动创建随机账号~</h3>
                                                <div class="col-xs-6">
                                                    <span id="licenseSelectModalUserIdBatch" hidden></span>
                                                    <label for="licenseSelectModalBatch"></label>
                                                    <select class="form-control" id="licenseSelectModalBatch"
                                                            style="height: 38px"
                                                            name="license-select-batch" size="1">
                                                        <option value="" disabled selected hidden>请选择许可证</option>
                                                    </select>
                                                    <label for="domainSelectModalBatch"></label>
                                                    <select class="form-control" id="domainSelectModalBatch"
                                                            style="height: 38px"
                                                            name="domain-select-batch" size="1">
                                                        <option value="" disabled selected hidden>请选择域名后缀</option>
                                                    </select>
                                                </div>
                                                <div class="col-xs-2">

                                                    <label for="addUserBatchNum"></label>
                                                    <h4>请输入数量：</h4>
                                                </div>
                                                <div class="col-xs-2">
                                                    <label for="addUserBatchNum"></label>
                                                    <input class="form-control" id="addUserBatchNum" type="number"
                                                           min="2" max="100" step="1" value="10">
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                                                </button>
                                                <button type="button" class="btn btn-primary" data-dismiss="modal"
                                                        onclick="addUserBatchClick()">保存
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--模糊框 end-->
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table id="usersTable" class="table table-bordered text-center">
                                        <thead>
                                        <tr class="text-center">
                                            <th>
                                                <label class="lyear-checkbox checkbox-primary">
                                                    <input type="checkbox" id="check-all"><span></span>
                                                </label>
                                            </th>
                                            <th class="text-center">编号</th>
                                            <th class="text-center hidden" id="UserUserId"></th>
                                            <th class="text-center">邮箱</th>
                                            <th class="text-center">姓名</th>
                                            <th class="text-center">订阅</th>
                                            <th class="text-center">状态</th>
                                            <th class="text-center">地区</th>
                                            <th class="text-center">创建时间</th>
                                        </tr>
                                        </thead>
                                    </table>
                                </div>

                                <ul class="pagination" id="pagination">
                                    <li class="" onclick="pageOnclick(0)"><span>上一页</span></li>
                                    <li class="disabled">
                                        <span id="usersIndex"></span>
                                        <span id="usersTotal"></span>
                                    </li>
                                    <li class="" onclick="pageOnclick(1)"><span>下一页</span></li>
                                </ul>
                            </div>
                        </div>

                    </div>
                </div>
                <!-- 表单-->
            </div>

        </main>
        <!--End 页面主要内容-->
    </div>
</div>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/perfect-scrollbar.min.js"></script>
<script type="text/javascript" src="js/main.min.js"></script>
<script type="text/javascript" src="js/jconfirm/jquery-confirm.min.js"></script>
<script type="text/javascript" src="js/bootstrap-notify.min.js"></script>
<script type="text/javascript" src="js/lightyear.js"></script>

<script language=javascript src='js/config.js'></script>
<script type="text/javascript" src="js/common.js"></script>
<script type="text/javascript" src="js/users.js"></script>
</body>
<script>
    // $(function () {
    //     $(".headerPage").load("header.html");
    //     // $(".footerpage").load("footer.html");
    // });
    // 确认提示框
    $('.enable-account-p').on('click', function () {
        let userPrincipalName;
        let userId;
        $('input[name="userIds"]:checked').each(function () {//遍历每一个名字为interest的复选框，其中选中的执行函数
            let row = $(this).parent("label").parent("td").parent("tr");//获取选中行
            userId = row.find("[name='userId']").html();//获取name='Sid'的值
            userPrincipalName = row.find("[name='userPrincipalName']").html();
        });
        $.alert({
            title: '启用账户',
            content: '该操作会允许该用户登录，账号如下：<br><br><strong>' + userPrincipalName + '</strong><br><br>',
            buttons: {
                confirm: {
                    text: '确认',
                    btnClass: 'btn-primary',
                    action: function () {
                        lightyear.loading('show');
                        // 假设ajax提交操作
                        enableUserClick(userId);
                    }
                },
                cancel: {
                    text: '取消'
                }
            }
        });
    });
    $('.disable-account-p').on('click', function () {
        let userPrincipalName;
        let userId;
        $('input[name="userIds"]:checked').each(function () {//遍历每一个名字为interest的复选框，其中选中的执行函数
            let row = $(this).parent("label").parent("td").parent("tr");//获取选中行
            userId = row.find("[name='userId']").html();//获取name='Sid'的值
            userPrincipalName = row.find("[name='userPrincipalName']").html();
        });
        $.alert({
            title: '禁用账户',
            content: '该操作会禁止该用户登录，账号如下：<br><br><strong>' + userPrincipalName + '</strong><br><br>',
            buttons: {
                confirm: {
                    text: '确认',
                    btnClass: 'btn-primary',
                    action: function () {
                        lightyear.loading('show');
                        disableUserClick(userId);
                    }
                },
                cancel: {
                    text: '取消'
                }
            }
        });
    });
    $('.deleted-account-p').on('click', function () {
        let userPrincipalName;
        let userId;
        $('input[name="userIds"]:checked').each(function () {//遍历每一个名字为interest的复选框，其中选中的执行函数
            let row = $(this).parent("label").parent("td").parent("tr");//获取选中行
            userId = row.find("[name='userId']").html();//获取name='Sid'的值
            userPrincipalName = row.find("[name='userPrincipalName']").html();
        });
        $.alert({
            title: '删除账户',
            content: '<span style="color: red">警告！</span> 该操作会删除该账号，账号如下：<br><br><strong>' + userPrincipalName + '</strong><br><br>',
            buttons: {
                confirm: {
                    text: '确认',
                    btnClass: 'btn-primary',
                    action: function () {
                        lightyear.loading('show');
                        deletedUserClick(userId);
                    }
                },
                cancel: {
                    text: '取消'
                }
            }
        });
    });

    $('.deleted-account-p-batch').on('click', function () {
        $.alert({
            title: '<span style="color: red">警告！谨慎操作</span>',
            content: '</span> <h4>该操作会自动删除所有非管理员账号。</h4>',
            buttons: {
                confirm: {
                    text: '确认',
                    btnClass: 'btn-primary',
                    action: function () {
                        lightyear.loading('show');
                        deletedUserBatchClick();
                    }
                },
                cancel: {
                    text: '取消'
                }
            }
        });
    });

    $(function () {
        $('#addLicenseModal').on('show.bs.modal', function () {
            var userPrincipalName;
            var userId;
            $('input[name="userIds"]:checked').each(function () {//遍历每一个名字为interest的复选框，其中选中的执行函数
                var row = $(this).parent("label").parent("td").parent("tr");//获取选中行
                userId = row.find("[name='userId']").html();//获取name='Sid'的值
                userPrincipalName = row.find("[name='userPrincipalName']").html();
            });
            $('#licenseSelectModalUserId').html(userId);
            $('#addLicenseUser').html("你将为：" + userPrincipalName + " 账号添加订阅！");
            setLicense("licenseSelectModal");
        });
        $('#disLicenseModal').on('show.bs.modal', function () {
            var userPrincipalName;
            var userId;
            $('input[name="userIds"]:checked').each(function () {//遍历每一个名字为interest的复选框，其中选中的执行函数
                var row = $(this).parent("label").parent("td").parent("tr");//获取选中行
                userId = row.find("[name='userId']").html();//获取name='Sid'的值
                userPrincipalName = row.find("[name='userPrincipalName']").html();
            });
            $('#disLicenseSelectModalUserId').html(userId);
            $('#disLicenseUser').html("你取消：" + userPrincipalName + " 账号订阅！");
        })




    });


</script>

</html>